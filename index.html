<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrimeVue App</title>
    <link href="https://unpkg.com/@primevue/themes/aura/aura.min.css" rel="stylesheet">
    <link href="https://unpkg.com/primeicons/primeicons.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/primevue/primevue.min.js"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: sans-serif;
        }
        button {
          cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="app"></div>
    <script>
    (function() {
        const { createApp, ref, onMounted } = Vue;
        const { PrimeVue } = primevue;
        const { Button } = primevue.button;
        const { DataTable } = primevue.datatable;
        const { Column } = primevue.column;
        const { Menu } = primevue.menu;
        const { Dialog } = primevue.dialog;

        const app = createApp({
            components: {
                Button,
                DataTable,
                Column,
                Menu,
                Dialog
            },
            setup() {
                const products = ref([]);
                const menuItems = ref([
                    {label: 'Edit', icon: 'pi pi-pencil'},
                    {label: 'Delete', icon: 'pi pi-trash'}
                ]);
                const dialogVisible = ref(false);
                const selectedProduct = ref(null);

                const openDialog = (product) => {
                  selectedProduct.value = product;
                  dialogVisible.value = true;
                };
                const closeDialog = () => {
                  dialogVisible.value = false;
                  selectedProduct.value = null;
                };

                onMounted(() => {
                    (function() {
                    const generateMockData = (count) => {
                        const mockData = [];
                        for (let i = 0; i < count; i++) {
                            mockData.push({
                                id: i + 1,
                                name: `Product ${i + 1}`,
                                description: `This is a description for product ${i + 1}`,
                                price: (Math.random() * 100).toFixed(2),
                                imageUrl: `https://placehold.co/200x150/EEE/31343C`,
                                quantity: Math.floor(Math.random() * 100),
                                category: ['Electronics', 'Clothing', 'Books', 'Home'][Math.floor(Math.random() * 4)],
                                rating: Math.floor(Math.random() * 5) + 1,
                                addedDate: new Date(Date.now() - Math.random() * 31536000000).toLocaleDateString()
                            });
                        }
                        return mockData;
                    };
                    products.value = generateMockData(30);
                  })();
                });
                return {products, menuItems, dialogVisible, openDialog, closeDialog, selectedProduct};
            },
            template: `
            <Dialog v-model:visible="dialogVisible" header="Product Details" :style="{ width: '50vw' }" :modal="true">
              <template v-if="selectedProduct">
                <div style="display: flex; gap: 20px;">
                    <img :src="selectedProduct.imageUrl" alt="Product Image" style="max-width: 200px;" />
                    <div>
                       <h2>{{ selectedProduct.name }}</h2>
                       <p><strong>Description:</strong> {{ selectedProduct.description }}</p>
                       <p><strong>Price:</strong> ${{ selectedProduct.price }}</p>
                       <p><strong>Quantity:</strong> {{ selectedProduct.quantity }}</p>
                       <p><strong>Category:</strong> {{ selectedProduct.category }}</p>
                       <p><strong>Rating:</strong> {{ selectedProduct.rating }} / 5</p>
                       <p><strong>Added Date:</strong> {{ selectedProduct.addedDate }}</p>
                     </div>
                </div>
              </template>
              <template #footer>
                 <Button label="Close" icon="pi pi-times" @click="closeDialog" class="p-button-secondary" />
               </template>
            </Dialog>
                <DataTable :value="products">
                    <Column field="id" header="ID"></Column>
                    <Column field="name" header="Name"></Column>
                    <Column field="price" header="Price"></Column>
                    <Column field="category" header="Category"></Column>
                    <Column header="Actions">
                       <template #body="{ data }">
                         <Button icon="pi pi-info-circle" @click="openDialog(data)" class="p-button-sm p-button-secondary"></Button>
                       </template>
                    </Column>
                </DataTable>
            `
        });
        app.use(PrimeVue);
        app.mount('#app');
    })();
    </script>
</body>
</html>